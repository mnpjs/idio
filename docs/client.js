(function(){function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function k(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function v(a){if(!(a instanceof Array)){a=k(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ca;
if("function"==typeof Object.setPrototypeOf)ca=Object.setPrototypeOf;else{var da;a:{var ea={N:!0},fa={};try{fa.__proto__=ea;da=fa.N;break a}catch(a){}da=!1}ca=da?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ha=ca;
function w(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(ha)ha(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c]}var x="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ia="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
function y(a,b){if(b){var c=x;a=a.split(".");for(var d=0;d<a.length-1;d++){var f=a[d];f in c||(c[f]={});c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ia(c,a,{configurable:!0,writable:!0,value:b})}}
y("Promise",function(a){function b(e){this.b=0;this.i=void 0;this.a=[];var h=this.c();try{e(h.resolve,h.reject)}catch(l){h.reject(l)}}function c(){this.a=null}function d(e){return e instanceof b?e:new b(function(h){h(e)})}if(a)return a;c.prototype.b=function(e){if(null==this.a){this.a=[];var h=this;this.c(function(){h.i()})}this.a.push(e)};var f=x.setTimeout;c.prototype.c=function(e){f(e,0)};c.prototype.i=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var h=0;h<e.length;++h){var l=
e[h];e[h]=null;try{l()}catch(m){this.g(m)}}}this.a=null};c.prototype.g=function(e){this.c(function(){throw e;})};b.prototype.c=function(){function e(m){return function(n){l||(l=!0,m.call(h,n))}}var h=this,l=!1;return{resolve:e(this.V),reject:e(this.g)}};b.prototype.V=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof b)this.W(e);else{a:switch(typeof e){case "object":var h=null!=e;break a;case "function":h=!0;break a;default:h=!1}h?this.B(e):this.j(e)}};
b.prototype.B=function(e){var h=void 0;try{h=e.then}catch(l){this.g(l);return}"function"==typeof h?this.X(h,e):this.j(e)};b.prototype.g=function(e){this.o(2,e)};b.prototype.j=function(e){this.o(1,e)};b.prototype.o=function(e,h){if(0!=this.b)throw Error("Cannot settle("+e+", "+h+"): Promise already settled in state"+this.b);this.b=e;this.i=h;this.v()};b.prototype.v=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)g.b(this.a[e]);this.a=null}};var g=new c;b.prototype.W=function(e){var h=this.c();
e.A(h.resolve,h.reject)};b.prototype.X=function(e,h){var l=this.c();try{e.call(h,l.resolve,l.reject)}catch(m){l.reject(m)}};b.prototype.then=function(e,h){function l(r,q){return"function"==typeof r?function(u){try{m(r(u))}catch(t){n(t)}}:q}var m,n,p=new b(function(r,q){m=r;n=q});this.A(l(e,m),l(h,n));return p};b.prototype.catch=function(e){return this.then(void 0,e)};b.prototype.A=function(e,h){function l(){switch(m.b){case 1:e(m.i);break;case 2:h(m.i);break;default:throw Error("Unexpected state: "+
m.b);}}var m=this;null==this.a?g.b(l):this.a.push(l)};b.resolve=d;b.reject=function(e){return new b(function(h,l){l(e)})};b.race=function(e){return new b(function(h,l){for(var m=k(e),n=m.next();!n.done;n=m.next())d(n.value).A(h,l)})};b.all=function(e){var h=k(e),l=h.next();return l.done?d([]):new b(function(m,n){function p(u){return function(t){r[u]=t;q--;0==q&&m(r)}}var r=[],q=0;do r.push(void 0),q++,d(l.value).A(p(r.length-1),n),l=h.next();while(!l.done)})};return b});
function ja(){ja=function(){};x.Symbol||(x.Symbol=ka)}function la(a,b){this.a=a;ia(this,"description",{configurable:!0,writable:!0,value:b})}la.prototype.toString=function(){return this.a};var ka=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new la("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function B(){ja();var a=x.Symbol.iterator;a||(a=x.Symbol.iterator=x.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ia(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ma(aa(this))}});B=function(){}}function ma(a){B();a={next:a};a[x.Symbol.iterator]=function(){return this};return a}function C(){this.o=!1;this.j=null;this.b=void 0;this.a=1;this.i=this.g=0;this.B=this.c=null}function na(a){if(a.o)throw new TypeError("Generator is already running");a.o=!0}
C.prototype.v=function(a){this.b=a};function oa(a,b){a.c={I:b,J:!0};a.a=a.g||a.i}C.prototype.return=function(a){this.c={return:a};this.a=this.i};function D(a,b,c){a.a=c;return{value:b}}C.prototype.s=function(a){this.a=a};function F(a,b,c){a.g=b;void 0!=c&&(a.i=c)}function G(a){a.g=0;var b=a.c.I;a.c=null;return b}function H(a){a.B=[a.c];a.g=0;a.i=0}function I(a,b){var c=a.B.splice(0)[0];(c=a.c=a.c||c)?c.J?a.a=a.g||a.i:void 0!=c.s&&a.i<c.s?(a.a=c.s,a.c=null):a.a=a.i:a.a=b}
function pa(a){this.a=new C;this.b=a}function qa(a,b){na(a.a);var c=a.a.j;if(c)return ra(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.a.return);a.a.return(b);return J(a)}function ra(a,b,c,d){try{var f=b.call(a.a.j,c);if(!(f instanceof Object))throw new TypeError("Iterator result "+f+" is not an object");if(!f.done)return a.a.o=!1,f;var g=f.value}catch(e){return a.a.j=null,oa(a.a,e),J(a)}a.a.j=null;d.call(a.a,g);return J(a)}
function J(a){for(;a.a.a;)try{var b=a.b(a.a);if(b)return a.a.o=!1,{value:b.value,done:!1}}catch(c){a.a.b=void 0,oa(a.a,c)}a.a.o=!1;if(a.a.c){b=a.a.c;a.a.c=null;if(b.J)throw b.I;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function sa(a){this.next=function(b){na(a.a);a.a.j?b=ra(a,a.a.j.next,b,a.a.v):(a.a.v(b),b=J(a));return b};this.throw=function(b){na(a.a);a.a.j?b=ra(a,a.a.j["throw"],b,a.a.v):(oa(a.a,b),b=J(a));return b};this.return=function(b){return qa(a,b)};B();this[Symbol.iterator]=function(){return this}}function ta(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,f){function g(e){e.done?d(e.value):Promise.resolve(e.value).then(b,c).then(g,f)}g(a.next())})}
function K(a){return ta(new sa(new pa(a)))}function ua(a,b){B();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}y("Array.prototype.values",function(a){return a?a:function(){return ua(this,function(b,c){return c})}});
y("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&c.push([d,b[d]]);return c}});function va(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}
y("String.prototype.startsWith",function(a){return a?a:function(b,c){var d=va(this,b,"startsWith"),f=d.length,g=b.length;c=Math.max(0,Math.min(c|0,d.length));for(var e=0;e<g&&c<f;)if(d[c++]!=b[e++])return!1;return e>=g}});y("String.prototype.repeat",function(a){return a?a:function(b){var c=va(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=c),b>>>=1)c+=c;return d}});
y("Array.prototype.keys",function(a){return a?a:function(){return ua(this,function(b){return b})}});try{window.preact=preact}catch(a){window.preact={}}var wa=window.preact,L=wa.h,M=wa.Component,xa=wa.render;function ya(a){var b=a.help,c=a.m,d=a.valid,f="text-muted";a.invalid?f="invalid-feedback":d&&(f="valid-feedback");a="form-text "+f;return"string"!=typeof b?L("small",{id:c,className:a},b):L("small",{id:c,className:a,dangerouslySetInnerHTML:{__html:b}})};function za(a,b){var c=this.props,d=c.name,f=a.value;if(this.context.values[d]!=b.values[d])return!0;if(c.value!=f){if(b.onChange)b.onChange(a.name,f);return!1}}function Aa(a){var b=[];a=Object.entries(a).reduce(function(c,d){var f=k(d);d=f.next().value;f=f.next().value;if("col"==d||d.startsWith("col-"))return b.push(d),c;c[d]=f;return c},{});return{H:b,T:a}};function N(){var a=M.call(this)||this;a.id="i"+Math.floor(1E5*Math.random());a.m="h"+a.id;a.props=a.props;return a}w(N,M);N.prototype.getChildContext=function(){return{id:this.id,m:this.m}};
N.prototype.render=function(a){var b=Object.assign({},a),c=a.children,d=a.label,f=a.help,g=a.details,e=a.className,h=a["form-row"],l=void 0===a.row?h:a.row;a=a.labelClassName;b=(delete b.children,delete b.label,delete b.help,delete b.details,delete b.className,delete b["form-row"],delete b.row,delete b.labelClassName,b);e=["form-group",e,l?(h?"form-":"")+"row":null].filter(Boolean).join(" ")||void 0;h=Aa(b).H;a=[l?"col-form-label":null,a].concat(v(h)).filter(Boolean).join(" ")||void 0;d=d?L("label",
{className:a,htmlFor:this.id},d):null;f=L(ya,{help:f,m:this.m});return g?L("details",{className:e},L("summary",{},d),c,l?L("div",{className:"col-12"},f):f):L("div",{className:e},d,c,l?L("div",{className:"col-12"},f):f)};function O(){var a=M.call(this)||this;a.props=a.props;return a}w(O,M);O.prototype.shouldComponentUpdate=function(a,b,c){return za.call(this,a,c)};O.prototype.componentDidMount=function(){var a=this.props,b=k(a.children).next().value;a=a.name;var c=this.context.onChange;b&&c(a,b.trim())};
O.prototype.render=function(a){var b=Object.assign({},a),c=void 0===a.rows?3:a.rows,d=a.required,f=a.name,g=a.placeholder;a=a.children;b=(delete b.rows,delete b.required,delete b.name,delete b.placeholder,delete b.children,b);var e=this.context,h=e.onChange,l=void 0===e.values?{}:e.values,m=f in l;return L("textarea",Object.assign({},b,{required:d,name:f,placeholder:g,"aria-describedby":e.m,className:"form-control",id:e.id,onChange:function(n){h(f,n.currentTarget.value)},rows:c}),m?l[f]:a)};function P(){var a=M.call(this)||this;a.props=a.props;return a}w(P,M);P.prototype.shouldComponentUpdate=function(a,b,c){return za.call(this,a,c)};P.prototype.componentDidMount=function(){var a=this.props,b=a.value;a=a.name;var c=this.context.onChange;void 0!==b&&c&&c(a,b)};P.prototype.onChange=function(a){this.context.onChange(this.props.name,a)};
P.prototype.render=function(a){var b=this,c=Object.assign({},a),d=a.required,f=a.name,g=a.placeholder,e=void 0===a.type?"text":a.type,h=a.file,l=a.value,m=a.className,n=a.invalid,p=a.valid;a=a.help;c=(delete c.required,delete c.name,delete c.placeholder,delete c.type,delete c.file,delete c.value,delete c.className,delete c.invalid,delete c.valid,delete c.help,c);var r=Aa(c);c=r.H;r=r.T;m=["form-control"+(h?"-file":""),m,n?"is-invalid":null,p?"is-valid":null].filter(Boolean).join(" ");var q=this.context;
h=q.m;var u=void 0===q.values?{}:q.values;d=L("input",Object.assign({},r,{required:d,name:f,placeholder:g,className:m,value:f in u?u[f]:l,type:e,"aria-describedby":h,id:q.id,onChange:function(t){b.onChange(t.currentTarget.value)}}));return c.length?(n=a?L(ya,{help:a,m:h,valid:p,invalid:n}):null,L("div",{className:c.join(" ")},d,n)):d};function Ba(a,b){return b=b||{},new Promise(function(c,d){function f(){return{ok:2==(g.status/100|0),statusText:g.statusText,status:g.status,url:g.responseURL,text:function(){return Promise.resolve(g.responseText)},json:function(){return Promise.resolve(JSON.parse(g.responseText))},blob:function(){return Promise.resolve(new Blob([g.response]))},clone:f,headers:{keys:function(){return e},entries:function(){return h},get:function(n){return l[n.toLowerCase()]},has:function(n){return n.toLowerCase()in
l}}}}var g=new XMLHttpRequest,e=[],h=[],l={},m;for(m in g.open(b.method||"get",a,!0),g.onload=function(){g.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(n,p,r){e.push(p=p.toLowerCase());h.push([p,r]);l[p]=l[p]?l[p]+","+r:r});c(f())},g.onerror=d,g.withCredentials="include"==b.credentials,b.headers)g.setRequestHeader(m,b.headers[m]);g.send(b.body||null)})};function Q(){var a=M.call(this)||this;a.props=a.props;a.state={formLoading:!1,error:null,success:null};a.a={};return a}w(Q,M);
Q.prototype.b=function(a){var b=this,c,d,f,g,e;return K(function(h){switch(h.a){case 1:a.preventDefault();if(!b.props.path)return b.setState({error:"Path is not set in the properties of the form."}),h.return(!1);b.setState({error:null,success:null});c=new FormData(a.target);b.setState({formLoading:!0});F(h,2,3);return D(h,Ba(b.props.path,Object.assign({},{method:"POST",body:c},b.a)),5);case 5:return d=h.b,D(h,d.json(),6);case 6:f=h.b,(g=f.error)?b.setState({error:g}):b.setState({success:1});case 3:H(h);
b.setState({formLoading:!1});I(h,4);break;case 2:e=G(h);b.setState({error:e});h.s(3);break;case 4:if(!b.props.submitFinish){h.s(7);break}return D(h,b.props.submitFinish(d),7);case 7:return h.return(!1)}})};function R(){var a=M.call(this)||this;a.state={values:{}};a.props=a.props;return a}w(R,M);R.prototype.getChildContext=function(){return{values:this.state.values,onChange:this.onChange.bind(this)}};R.prototype.onChange=function(a,b){var c={};this.setState({values:Object.assign({},this.state.values,(c[a]=b,c))});if(this.props.onChange)this.props.onChange(this.state.values)};
R.prototype.render=function(a){var b=Object.assign({},a),c=a.children,d=a.formRef;a=a.onSubmit;b=(delete b.children,delete b.formRef,delete b.onSubmit,delete b.onChange,b);return L("form",Object.assign({},b,{ref:d,onSubmit:a}),c)};
function Ca(a){var b=Object.assign({},a),c=a.disabled,d=a.loading,f=a.confirmText,g=void 0===a.loadingText?f:a.loadingText,e=a.className,h=void 0===a.type?"primary":a.type;a=void 0===a.outline?!1:a.outline;b=(delete b.disabled,delete b.loading,delete b.confirmText,delete b.loadingText,delete b.className,delete b.type,delete b.outline,b);e=["btn","btn-"+(a?"outline-":"")+h,e].filter(Boolean);return L("button",Object.assign({},b,{className:e.join(" "),type:"submit",disabled:c||d}),d&&L("span",{className:"spinner-border spinner-border-sm"+
(g?" mr-2":""),role:"status","aria-hidden":"true"}),d?g:f)};function Da(a){var b=a.linkedin_user;a=a.github_user;var c;if(b)var d=b.profilePicture;else a&&(d=a.avatar_url);b?c=b.firstName+" "+b.lastName:a&&(c=a.name||a.login);return{K:d,name:c}};function S(){var a=M.call(this)||this;a.register=null;a.scope=null;return a}w(S,M);S.prototype.componentDidMount=function(){var a=this.props;a=void 0===a.scope?"/":a.scope;this.register=Ea(a);this.scope=a};S.prototype.componentDidUpdate=function(){var a=this.props;a=void 0===a.scope?"/":a.scope;a!=this.scope&&(this.register=Ea(a),this.scope=a)};
function Ea(a){a=void 0===a?"/":a;var b;return K(function(c){if(1==c.a)return D(c,navigator.serviceWorker.register(a+"service-worker.js",{scope:a}),2);b=c.b;return c.return(b)})}function Fa(a){return K(function(b){return b.return(a.register)})}
function Ga(a){var b="comments";b=void 0===b?"comments":b;var c,d,f,g,e,h,l,m,n,p,r,q;return K(function(u){switch(u.a){case 1:return D(u,a.context.fetch("vapid"),2);case 2:c=u.b;d=c.public_vapid;if(!d)throw Error("Could not fetch vapid key.");var t="=".repeat((4-d.length%4)%4);t=window.atob((d+t).replace(/-/g,"+").replace(/_/g,"/"));for(var z=new Uint8Array(t.length),A=0;A<t.length;++A)z[A]=t.charCodeAt(A);f=z;return D(u,Fa(a),3);case 3:return g=u.b,D(u,g.pushManager.subscribe({applicationServerKey:f,
userVisibleOnly:!0}),4);case 4:return e=u.b,h=new FormData,l=Ha(e),m=l.endpoint,n=l.keys,p=n.l,r=n.f,h.append("endpoint",m),h.append("auth",r),D(u,a.context.fetch("subscribe/"+p+"/"+b,{method:"POST",body:h}),5);case 5:return q=u.b,u.return(q)}})}
function Ia(a){var b="comments";b=void 0===b?"comments":b;var c,d,f,g,e,h;return K(function(l){switch(l.a){case 1:return D(l,Fa(a),2);case 2:return c=l.b,D(l,c.pushManager.getSubscription(),3);case 3:return d=l.b,f=Ha(d),g=f.keys,e=g.l,D(l,a.context.fetch("unsubscribe/"+e+"/"+b),4);case 4:return h=l.b,l.return(h)}})}
function Ja(a){var b,c,d,f,g,e,h,l;return K(function(m){switch(m.a){case 1:return D(m,Fa(a),2);case 2:return b=m.b,D(m,b.pushManager.getSubscription(),3);case 3:return c=m.b,F(m,4),d=Ha(c),f=d.keys,g=f.l,D(m,a.context.fetch("subscriptions/"+g),6);case 6:return e=m.b,h=e.comments,l=e.updates,m.return({comments:h,updates:l,l:g});case 4:return G(m),m.return({l:null,comments:!1,updates:!1})}})}
function Ha(a){a=JSON.parse(JSON.stringify(a));var b=a.keys;return{endpoint:a.endpoint,keys:{l:b.p256dh,f:b.auth}}};function T(){var a=S.call(this)||this;a.state.comments=!1;a.state.l=null;return a}w(T,S);T.prototype.componentDidMount=function(){var a=this;return K(function(b){S.prototype.componentDidMount.call(a);return D(b,Ka(a),0)})};function Ka(a){var b,c,d;return K(function(f){if(1==f.a)return a.setState({loading:!0}),f.g=0,f.i=2,D(f,Ja(a),4);2!=f.a&&(b=f.b,c=b.comments,d=b.l,c?a.setState({comments:c,l:d}):a.setState({comments:!1,l:null}));H(f);a.setState({loading:!1});return I(f,0)})}
T.prototype.subscribe=function(){var a=this;return K(function(b){return 1==b.a?(a.setState({loading:!0}),b.g=0,b.i=2,D(b,Ga(a),2)):3!=b.a?(H(b),a.setState({loading:!1}),I(b,3)):D(b,Ka(a),0)})};function La(a){K(function(b){return 1==b.a?(a.setState({loading:!0}),b.g=0,b.i=2,D(b,Ia(a),2)):3!=b.a?(H(b),a.setState({loading:!1}),I(b,3)):D(b,Ka(a),0)})}
T.prototype.render=function(a){var b=this;a=a.disabled;var c=this.state,d=c.comments,f=c.l;c=c.loading;return L(N,{"form-row":!0,"col-2":!0,label:"Subscribe",help:"Receive push notifications with replies."},L("div",{className:"col-10"},L("div",{className:"form-check col-4"},L("input",{checked:a?!1:d,onChange:function(g){if(g.currentTarget.checked)b.subscribe();else{if(!window.confirm("Are you sure you want so unsubscribe? You will stop receiving notifications from ALL comments on the website."))return g.currentTarget.checked=
!0;La(b)}},disabled:a||c,type:"checkbox",className:"form-check-input",id:"subscribe"}),L("label",{className:"form-check-label",htmlFor:"subscribe"},!a&&c&&L("span",{style:"color:grey"},"Checking your subscriptions..."),!a&&!c&&d&&L("span",{style:"color:green"},"You've subscribed \ud83d\udc4d")),d&&L("input",{value:f,name:"sub-id",type:"hidden"}))))};function U(){var a=Q.call(this)||this;a.a={credentials:"include"};a.state.O=void 0;return a}w(U,Q);U.prototype.componentWillMount=function(){var a=this,b,c;return K(function(d){if(1==d.a)return F(d,2),D(d,a.context.fetch("https://freegeoip.app/json/"),4);2!=d.a?(b=d.b,(c=b.country_code)&&a.setState({O:c}),d.a=0,d.g=0):(G(d),d.a=0)})};
U.prototype.render=function(a){var b=this,c=Object.assign({},a),d=a.onChange,f=a.f;a=a.scope;c=(delete c.onChange,delete c.f,delete c.scope,c);var g=this.context,e=g.host,h=g.C,l=g.L;g=void 0===g.replyTo?{}:g.replyTo;var m=g.id;g=g.name;var n=this.state,p=n.formLoading,r=n.error;n=n.success;var q=Da(f),u=q.K;q=q.name;return L(R,Object.assign({},c,{onSubmit:this.b.bind(this),onChange:function(t){b.setState({error:null,success:null});d&&d(t)}}),u&&L(P,{value:u,type:"hidden",name:"photo"}),L(P,{value:f.csrf,
type:"hidden",name:"csrf"}),L(N,{"form-row":!0,"col-2":!0,label:"Name*",help:"This will appear on the website"},L(P,{disabled:!h,value:q,"col-10":!0,name:"name"})),L(N,{help:f.github_user?"GitHub username, sign out to remove":"Please sign in with GitHub","form-row":!0,"col-2":!0,label:"GitHub"},L(P,{value:f.github_user?f.github_user.html_url:null,"col-5":!0,name:"github",disabled:!0}),f.github_user&&L("div",{className:"form-check form-check-inline col-4"},L("input",{type:"checkbox",className:"form-check-input",
id:"defaultCheck2",name:"hide-github"}),L("label",{className:"form-check-label",htmlFor:"defaultCheck2"},"Hide from public"))),L(N,{"form-row":!0,"col-2":!0,label:"Comment*",help:"Please enter your opinion"},L("div",{className:"col-10"},L(O,{disabled:!h,"data-id":"comment-text-area",required:!0,name:"comment"},g&&g+", ","I think you're right/wrong because..."),m&&L("input",{value:m,type:"hidden",name:"reply-to"})),m&&L("div",{className:"col-10"},"You're replying to ",L("a",{onClick:function(t){t.preventDefault();
document.querySelector('[data-comment="'+m+'"]').scrollIntoView({behavior:"smooth"});return!1},href:"#"},g,".")," ",L("a",{onClick:function(t){t.preventDefault();l(null);return!1},href:"#"},"Clear response"))),L(T,{disabled:!h,host:e,scope:a}),L(Ca,{disabled:!h,loading:p,type:"warning",confirmText:"Submit Data"}),r&&"Error: "+r,n&&"Comment has been submitted!")};function Ma(a,b,c,d,f,g){g=void 0===g?"api":g;var e,h,l,m,n,p,r;return K(function(q){switch(q.a){case 1:if(!a)throw Error("No path given");if(b){var u=a,t=[],z;for(z in b)if(b.hasOwnProperty(z)){var A=b[z];void 0!==A&&t.push(encodeURIComponent(z)+"="+encodeURIComponent(A))}t=t.join("&");a=u+(t.length?"?"+t:"")}/^https?:/.test(a)?e=a:(e=[c,g,d].filter(Boolean).join("/"),e+=a.startsWith("/")&&c?a:"/"+a);F(q,2);return D(q,Ba(e,f),4);case 4:return h=q.b,D(q,h.json(),5);case 5:l=q.b;m=Object.assign({},
l);n=l.error;p=(delete m.error,m);if(n)throw Error(n);return q.return(p);case 2:r=G(q);if(r instanceof Event)throw Error("network error");throw r;}})};function V(){var a=M.call(this)||this;a.state={loading:!1,error:null,f:{}};a.a=a.b.bind(a);a.props=a.props;window.addEventListener("message",a.a,!1);return a}w(V,M);V.prototype.componentDidMount=function(){this.f()};
V.prototype.fetch=function(a,b){b=void 0===b?{}:b;var c=Object.assign({},b),d=b.query,f=void 0===b.api_key?this.props.api_key:b.api_key,g=void 0===b.route?this.props.route:b.route,e=(delete c.query,delete c.api_key,delete c.route,c),h=this,l,m;return K(function(n){l=h.props;m=void 0===l.host?"":l.host;return n.return(Ma(a,d,m,f,e,g))})};
V.prototype.w=function(){var a=this,b;return K(function(c){if(1==c.a)return b=new FormData,b.append("csrf",a.state.f.csrf),D(c,a.fetch("signout",{route:"",api_key:"",method:"POST",body:b,credentials:"include"}),2);a.setState({f:{}});c.a=0})};
V.prototype.f=function(){var a=this,b,c;return K(function(d){switch(d.a){case 1:return a.setState({loading:!0}),F(d,2,3),D(d,a.fetch("auth",{credentials:"include",route:"",api_key:""}),5);case 5:b=d.b,a.setState({f:b});case 3:H(d);a.setState({loading:!1});I(d,0);break;case 2:c=G(d),a.setState({error:c.message}),d.s(3)}})};V.prototype.b=function(a){var b=a.origin;this.props.host&&b!=this.props.host||"signedin"==a.data&&this.f()};
V.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.a)};function Na(){return M.apply(this,arguments)||this}w(Na,M);Na.prototype.render=function(a){var b=a.f,c=a.w;a=b.github_user;if(!b.linkedin_user&&!a)return null;b=Da(b);a=b.name;return L("div",{},L("img",{src:b.K,width:"50"})," ","Hello, ",a,"!"," ",L("a",{onClick:function(d){d.preventDefault();c().catch(function(f){alert("Could not sign out: "+f.message+". Please refresh the page and try again. Alternatively, clear your cookies.")});return!1},href:"#"},"Sign Out"))};function Oa(a){var b=void 0===b?{}:b;var c=window.top,d=c.outerHeight,f=c.screenY,g=[];g.push("width=500","left="+(c.outerWidth/2+c.screenX-250));g.push("top="+(d/2+f-305-50),"height=610");c=Object.keys(b).map(function(e){return e+"="+b[e]});g.push.apply(g,v(c));window.open(a,"Sign In",g.join(","))};function Pa(a){a=void 0===a?"":a;var b=document.head,c=document.createElement("style");c.type="text/css";c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a));b.appendChild(c)};Pa(".LinkedInButton {\n  background: #0077B5;\n  display: inline-table;\n  border-radius: 3px;\n  font-family: Helvetica Neue,Helvetica,Arial,sans-serif;\n  text-decoration: none;\n  color: white !important;\n  cursor: pointer;\n}\n.LinkedInButton .LinkedInIn {\n  font-family: 'Myriad Pro', 'Gill Sans', 'Gill Sans MT', Calibri, sans-serif;\n  padding-left: 6px;\n  padding-right: 5px;\n  border-right: 1px solid #0369A0;\n  border-radius: 3px;\n  font-weight: 600;\n  background: #0077B5;\n  display: table-cell;\n  vertical-align: middle;\n}\n.LinkedInButton .LinkedInText {\n  padding-left: .5em;\n  padding-right: .5em;\n  font-size: smaller;\n  display: table-cell;\n  vertical-align: middle;\n}");function Qa(a){var b=void 0===a.size?"medium":a.size,c=a.host,d=void 0===a.G?"/linkedin":a.G,f;"medium"==b?f=1.5:"large"==b&&(f=2);return L("a",{onClick:function(g){g.preventDefault();Oa(""+c+d);return!1},onMouseOver:function(g){g.currentTarget.style.background="#0369A0"},onMouseOut:function(g){g.currentTarget.style.background="#0077B5"},className:"LinkedInButton"},L("div",{style:"font-size:"+f+"rem;",className:"LinkedInIn"},"in"),L("div",{className:"LinkedInText"},"Sign In With LinkedIn"))};function Ra(a){return L("svg",Object.assign({},a,{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}),L("title",{},"GitHub icon"),L("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}))}
;Pa(".GitHubButton {\n  background: #dfdfdf;\n  display: inline-table;\n  border-radius: 3px;\n  font-family: Helvetica Neue,Helvetica,Arial,sans-serif;\n  text-decoration: none;\n  color: black !important;\n  cursor: pointer;\n}\n.GitHubButton .GitHubLogo {\n  padding: 0px 6px 0px 5px;\n  border-right: 1px solid #bcbcbc;\n  border-radius: 3px;\n  font-weight: 600;\n  background: rgb(223, 223, 223);\n  display: table-cell;\n  vertical-align: middle;\n}\n.GitHubButton .GitHubText {\n  padding-left: .5em;\n  padding-right: .5em;\n  font-size: smaller;\n  display: table-cell;\n  vertical-align: middle;\n}");function Sa(a){var b=void 0===a.size?"medium":a.size,c=a.host,d=void 0===a.G?"/github":a.G,f;"medium"==b?f=1.5:"large"==b&&(f=2);return L("a",{onClick:function(g){g.preventDefault();Oa(""+c+d);return!1},onMouseOver:function(g){g.currentTarget.style.background="#bcbcbc"},onMouseOut:function(g){g.currentTarget.style.background="#DFDFDF"},className:"GitHubButton"},L("div",{style:"height:"+f+"rem;font-size:"+f+"rem",className:"GitHubLogo"},L(Ra,{height:"100%",style:"margin-top:-4px"})),L("div",{className:"GitHubText"},
"Sign In With GitHub"))};function W(){var a=M.call(this)||this;a.state.Y=!1;return a}w(W,M);W.prototype.render=function(a){return L("span",{},a.children,L(X,{timeout:void 0===a.timeout?250:a.timeout}))};function X(){var a=M.call(this)||this;a.state={D:0};a.a=null;return a}w(X,M);X.prototype.componentDidMount=function(){var a=this;this.a=setInterval(function(){var b=a.state.D+1;3<b&&(b=0);a.setState({D:b})},this.props.timeout)};X.prototype.componentWillUnmount=function(){clearInterval(this.a)};
X.prototype.render=function(){return L("span",{},".".repeat(this.state.D))};function Ta(a){var b=void 0===a.P?!0:a.P,c=a.F,d=a.error,f=a.loading,g=a.f,e=a.host;a=a.w;return d?L("div",{},"Error: ",d):f?L("div",{},"Loading",L(W)):L("div",{},!(g.linkedin_user||g.github_user)&&L("span",{style:"display:block"},"To display the profile image and validate your GitHub profile, sign in. No advanced permissions are required other than default ones (no email). Your public LinkedIn ID remains unknown. ",L("a",{href:c},"Privacy Policy")),L(Na,{f:g,w:a}),b&&!g.linkedin_user&&L(Qa,{host:e}),
b&&!g.linkedin_user&&" ",!g.github_user&&L(Sa,{host:e}))};Pa(".LCommentBlock {\n  display:table;\n  hyphens:auto;\n  -webkit-hyphens:auto;\n  word-break:break-word;\n}\n.LCommentBlock > div {\n  display: table-cell;\n  vertical-align: middle;\n}\n.LCommentBlock img {\n  margin-right: .5rem;\n  border-radius: 1.75rem;\n  width: 3.5rem;\n}");function Y(){var a=M.call(this)||this;a.state={comments:[],page:0,csrf:null};return a}w(Y,M);Y.prototype.componentDidMount=function(){this.fetch()};
Y.prototype.fetch=function(a,b){var c=this,d,f,g,e,h,l,m,n;return K(function(p){switch(p.a){case 1:return c.setState({loading:!0}),d=c.props,f=d.U,g={id:a,"reply-to":f,"last-comment-id":b},F(p,2,3),D(p,c.context.fetch("comments",{credentials:"include",query:g}),5);case 5:e=p.b,h=e.comments,l=e.csrf,m=b?v(c.state.comments).concat(v(h)):v(h).concat(v(c.state.comments)),c.setState({comments:m,csrf:l});case 3:H(p);c.setState({loading:!1});I(p,0);break;case 2:n=G(p),c.setState({error:n.message}),p.s(3)}})};
Y.prototype.render=function(a){var b=this;a=void 0===a.M?Infinity:a.M;var c=this.state,d=c.error,f=c.loading,g=c.comments,e=c.csrf;return d?L("div",{},"Error loading list: ",d):L("div",{className:"CommentsList"},g.map(function(h){return L(Ua,{list:b,key:h._id,comment:h,csrf:e,S:function(l){b.setState({comments:g.filter(function(m){return m._id!=l})})}})}),f&&L("div",{},"Loading list",L(W)),!f&&!g.length&&L("div",{},"No comments yet."),!f&&!!g.length&&a>g.length&&L("a",{onClick:function(h){h.preventDefault();
b.fetch(void 0,g[g.length-1]._id);return!1},href:"#"},"Load more"))};function Va(a){return(a=a.github_user)?L("span",{}," (",L("a",{href:a.html_url},a.login),")"):null}function Ua(){var a=M.call(this)||this;a.list=null;return a}w(Ua,M);
Ua.prototype.render=function(a){var b=this,c=a.comment,d=c._id,f=c.country,g=c.isAuthor,e=c.name,h=c.photo,l=c.comment,m=c.date,n=c.github_user;c=c.replies;var p=a.S,r=a.csrf;a=this.context;var q=a.C,u=a.L;a=this.state.u;return L("div",{className:"comment"},L("strong",{},e||"Anonymous"),L(Va,{github_user:n}),f?" from "+f:""," ","on ",L("em",{},(new Date(m)).toLocaleString())," ",g&&L("a",{onClick:function(t){var z,A;return K(function(E){switch(E.a){case 1:t.preventDefault();z=confirm("Are you sure you want to delete comment?");
if(!z)return E.return(!1);F(E,2);return D(E,b.context.fetch("remove-comment/"+d,{credentials:"include",query:{csrf:r}}),4);case 4:p(d);E.a=3;E.g=0;break;case 2:A=G(E),alert(A.message);case 3:return E.return(!1)}})},className:"badge badge-danger",href:"#"},"Remove")," ",L("a",{style:q?void 0:"color:grey",className:"badge badge-primary",href:"#",onClick:function(t){t.preventDefault();q?u({id:d,name:e,u:function(z){b.list?b.list.fetch(z):b.setState({u:!0})}}):alert("Please sign in to reply");return!1}},
"Reply"),L("div",{"data-comment":d,className:"LCommentBlock"},h&&L("div",{},L("img",{src:h})),L("div",{},l,!a&&L(Wa,{R:function(t){t.preventDefault();b.setState({u:!0});return!1},replies:c}))),a&&L("div",{"data-comment":d,className:"LCommentBlock"},L("div",{style:"width:50px;"}),L("div",{},L(Y,{ref:function(t){b.list=t},U:d,M:c}))))};function Wa(a){var b=a.replies;return b?L("div",{},L("a",{onClick:a.R,href:"#"},"Load ",b," repl",1<b?"ies":"y")):null};function Z(){var a=V.call(this)||this;a.list=null;return a}w(Z,V);Z.prototype.getChildContext=function(){var a=this;return{host:this.props.host,api_key:this.props.api_key,C:this.C,replyTo:this.state.replyTo,L:function(b){if(null===b)a.setState({replyTo:void 0});else{var c=b.id,d=b.name;b=b.u;document.querySelector('[data-id="comment-text-area"]').scrollIntoView({behavior:"smooth"});a.setState({replyTo:{id:c,name:d,u:b}})}},fetch:this.fetch.bind(this)}};
Z.prototype.render=function(a){var b=this,c=a.scope,d=a.F;a=a.api_key;var f=this.state,g=f.f,e=f.loading;f=f.error;return a?L("div",{},L(Ta,{F:d,error:f,loading:e,f:g,host:this.props.host,w:this.w.bind(this)}),L(U,{path:this.props.host+"/api/"+a+"/comment",f:g,submitFinish:function(h){var l,m,n,p,r,q;return K(function(u){if(1==u.a)return D(u,h.json(),2);l=u.b;m=l.error;n=l.id;!m&&n&&(p=b.state,r=void 0===p.replyTo?{}:p.replyTo,(q=r.u)?q(n):b.list&&b.list.fetch(n));u.a=0})},scope:c}),L(Y,{ref:function(h){b.list=
h}})):L("div",{},"Please pass the API key as api_key property.")};x.Object.defineProperties(Z.prototype,{C:{configurable:!0,enumerable:!0,get:function(){var a=this.state.f;return a.github_user||a.linkedin_user}}});var Xa={},Ya=(Xa.comments=function(a){var b=void 0===a.host?"https://akashic.page":a.host,c=void 0===a.container?"preact-div":a.container;xa(L(Z,{api_key:a.api_key,host:b,scope:a.scope,F:void 0===a.privacy?b+"/privacy-policy.html":a.privacy}),document.getElementById(c))},Xa);window.Client=Ya;}).call(this);

//# sourceMappingURL=client.js.map